import{u as b,j as e}from"./index-DBa1UfA7.js";import{r as i}from"./router-BfLf48VO.js";import{p as u}from"./price-pxaQBo84.js";import"./react-vendor-DdXWdMVC.js";const v="_filterContainer_7mcmx_1",N="_filterGroup_7mcmx_13",C="_filterActions_7mcmx_45",t={filterContainer:v,filterGroup:N,filterActions:C};function P(){const{vehicles:l,toggleAvailability:j,markPossiblePurchase:m}=b(),[n,h]=i.useState(""),[o,x]=i.useState(""),[c,p]=i.useState(""),[s,a]=i.useState(null),f=i.useMemo(()=>Array.from(new Set(l.map(r=>r.marca).filter(Boolean))),[l]),g=i.useMemo(()=>Array.from(new Set(l.map(r=>r.year).filter(Boolean))).sort((r,d)=>d-r),[l]),y=i.useMemo(()=>l.filter(r=>{if(n&&r.marca!==n||o&&String(r.year)!==String(o))return!1;if(c){const d=u(c);if(d>0&&u(r.price)>d)return!1}return!0}),[l,n,o,c]);return e.jsxs("main",{className:"page inventory",children:[e.jsx("h2",{children:"Inventario de vehículos"}),e.jsxs("div",{className:t.filterContainer,children:[e.jsxs("div",{className:t.filterGroup,children:[e.jsx("label",{htmlFor:"filter-marca",children:"Marca"}),e.jsxs("select",{id:"filter-marca",className:"form-select",value:n,onChange:r=>h(r.target.value),children:[e.jsx("option",{value:"",children:"Todas"}),f.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:t.filterGroup,children:[e.jsx("label",{htmlFor:"filter-year",children:"Año"}),e.jsxs("select",{id:"filter-year",className:"form-select",value:o,onChange:r=>x(r.target.value),children:[e.jsx("option",{value:"",children:"Todos"}),g.map(r=>e.jsx("option",{value:r,children:r},r))]})]}),e.jsxs("div",{className:t.filterGroup,children:[e.jsx("label",{htmlFor:"filter-price",children:"Precio máximo (CLP)"}),e.jsx("input",{id:"filter-price",className:"form-control",placeholder:"ej. 15000000",value:c,onChange:r=>p(r.target.value)})]}),e.jsxs("div",{className:t.filterActions,children:[e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{h(""),x(""),p("")},children:"Limpiar"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>{},children:"Filtrar"})]})]}),e.jsx("div",{className:"row",children:y.map(r=>e.jsx("div",{className:"col-md-4 mb-3",children:e.jsx("article",{className:"card value-card h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h3",{children:r.title}),e.jsx("p",{style:{color:"var(--muted)",marginBottom:".5rem"},children:r.desc}),e.jsxs("div",{style:{marginBottom:".75rem"},children:[e.jsxs("p",{style:{margin:"0.25rem 0"},children:[e.jsx("strong",{children:"Marca:"})," ",r.marca]}),e.jsxs("p",{style:{margin:"0.25rem 0"},children:[e.jsx("strong",{children:"Modelo:"})," ",r.modelo]}),e.jsxs("p",{style:{margin:"0.25rem 0"},children:[e.jsx("strong",{children:"Año:"})," ",r.year]}),e.jsxs("p",{style:{margin:"0.25rem 0"},children:[e.jsx("strong",{children:"Precio:"})," ",r.price]}),e.jsxs("p",{style:{margin:"0.25rem 0"},children:[e.jsx("strong",{children:"Estado:"}),e.jsx("span",{style:{marginLeft:".5rem",padding:".2rem .5rem",borderRadius:"4px",fontSize:".85rem",fontWeight:"600",background:r.status==="vendido"?"#fee":"#efe",color:r.status==="vendido"?"#c00":"#070"},children:r.status==="vendido"?"Vendido":"Disponible"})]})]}),e.jsxs("div",{style:{display:"flex",gap:".5rem",flexWrap:"wrap"},children:[e.jsx("button",{className:`btn ${r.status==="vendido"?"sold":"cta"}`,onClick:()=>j(r.id),children:r.status==="vendido"?"Marcar disponible":"Marcar vendido"}),e.jsx("button",{className:"btn ghost",onClick:()=>m(r.id),children:"Posible compra"}),e.jsx("button",{className:"btn primary",onClick:()=>a(r),children:"Ver detalles"})]})]})})},r.id))}),s&&e.jsx("div",{className:"details-backdrop",role:"dialog","aria-modal":"true",onClick:()=>a(null),children:e.jsxs("div",{className:"details-modal",onClick:r=>r.stopPropagation(),style:{maxWidth:"600px"},children:[e.jsx("button",{className:"modal-close",onClick:()=>a(null),"aria-label":"Cerrar",children:"×"}),e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsx("h2",{style:{marginTop:0},children:s.title}),e.jsx("p",{style:{color:"var(--muted)",marginBottom:"1rem"},children:s.desc}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.75rem",marginBottom:"1.5rem",padding:"1rem",background:"var(--bg)",borderRadius:"8px"},children:[e.jsxs("div",{children:[e.jsx("strong",{style:{display:"block",marginBottom:".25rem",fontSize:".9rem",color:"var(--muted)"},children:"Marca"}),e.jsx("p",{style:{margin:0},children:s.marca})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{display:"block",marginBottom:".25rem",fontSize:".9rem",color:"var(--muted)"},children:"Modelo"}),e.jsx("p",{style:{margin:0},children:s.modelo})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{display:"block",marginBottom:".25rem",fontSize:".9rem",color:"var(--muted)"},children:"Año"}),e.jsx("p",{style:{margin:0},children:s.year})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{display:"block",marginBottom:".25rem",fontSize:".9rem",color:"var(--muted)"},children:"Precio"}),e.jsx("p",{style:{margin:0,fontSize:"1.2rem",fontWeight:"700",color:"var(--primary)"},children:s.price})]}),e.jsxs("div",{children:[e.jsx("strong",{style:{display:"block",marginBottom:".25rem",fontSize:".9rem",color:"var(--muted)"},children:"Estado"}),e.jsx("p",{style:{margin:0},children:e.jsx("span",{style:{padding:".25rem .6rem",borderRadius:"4px",fontSize:".85rem",fontWeight:"600",background:s.status==="vendido"?"#fee":"#efe",color:s.status==="vendido"?"#c00":"#070"},children:s.status==="vendido"?"Vendido":"Disponible"})})]})]}),e.jsxs("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn cta",onClick:()=>{m(s.id),a(null)},children:"Marcar como posible compra"}),e.jsx("button",{className:"btn ghost",onClick:()=>a(null),children:"Cerrar"})]})]})]})})]})}export{P as default};
