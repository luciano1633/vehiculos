import{u as A,j as e}from"./index-DBa1UfA7.js";import{u as I,r as t,L as f}from"./router-BfLf48VO.js";import{f as q}from"./price-pxaQBo84.js";import"./react-vendor-DdXWdMVC.js";function M(){const{addVehicle:y}=A(),h=I(),[r,c]=t.useState({marca:"",modelo:"",price:"",year:"",desc:""}),[b,p]=t.useState(!1),[N,l]=t.useState(""),[n,x]=t.useState(""),d={Kia:["Rio","Sportage"],Hyundai:["Accent","Tucson"],Subaru:["Impreza","Forester"],Chevrolet:["Spark","Cruze"],Toyota:["Yaris","Corolla"]},j={Rio:"Confort y eficiencia.",Sportage:"Espacio y confort para la familia.",Accent:"Económico y práctico para la ciudad.",Tucson:"Versatilidad y tecnologías de seguridad.",Impreza:"Estabilidad y desempeño en ruta.",Forester:"Robustez y capacidad para viajes largos.",Spark:"Ágil, ideal para ciudad.",Cruze:"Comodidad y rendimiento en ruta.",Yaris:"Confiable y de bajo consumo.",Corolla:"Durabilidad y confort.",K3:"Confort y eficiencia.",WRX:"Rendimiento deportivo y tracción.","i30 Fastback":"Diseño dinámico y versatilidad."},v=new Date().getFullYear(),g=a=>c(s=>({...s,[a.target.name]:a.target.value})),C=a=>{const s=a.target.value,i=/[A-Za-zÁÉÍÓÚáéíóúÑñ]/.test(s);x(i?"Sólo se permiten números":"");const o=s.replace(/[^0-9]/g,"");if(o===""){c(u=>({...u,price:""}));return}const m=parseInt(o,10),S=new Intl.NumberFormat("es-CL").format(m);c(u=>({...u,price:S}))},w=a=>{if(a.preventDefault(),!r.marca||!r.modelo)return alert("Ingrese marca y modelo");const i=(r.price||"").toString().trim().replace(/[^0-9]/g,""),o=i===""?0:parseInt(i,10),m=q(o);y({marca:r.marca,modelo:r.modelo,title:`${r.marca} ${r.modelo}`,desc:r.desc||"",year:parseInt(r.year||0,10),km:"0 km",price:m,img:"",gallery:[]}),h("/inventario")};return e.jsxs("main",{className:"page add-vehicle","aria-labelledby":"add-veh-title",children:[e.jsxs("header",{className:"quienes-hero contact-hero",children:[e.jsxs("div",{className:"hero-content",children:[e.jsx("h1",{id:"add-veh-title",children:"Agregar vehículo"}),e.jsx("p",{className:"hero-sub",children:"Incluye un nuevo vehículo al inventario del sitio."}),e.jsxs("div",{className:"hero-actions",children:[e.jsx(f,{className:"btn primary",to:"/",children:"Inicio"}),e.jsx(f,{className:"btn ghost",to:"/inventario",children:"Ver inventario"})]})]}),e.jsx("div",{className:"hero-visual","aria-hidden":"true",children:e.jsxs("svg",{width:"320",height:"200",viewBox:"0 0 320 200",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Ilustración de formulario",children:[e.jsx("rect",{width:"320",height:"200",rx:"12",fill:"url(#gAdd)"}),e.jsxs("g",{fill:"#fff",opacity:"0.9",children:[e.jsx("rect",{x:"40",y:"50",width:"240",height:"18",rx:"6",opacity:"0.18"}),e.jsx("rect",{x:"40",y:"80",width:"180",height:"14",rx:"6",opacity:"0.12"}),e.jsx("circle",{cx:"60",cy:"150",r:"10",opacity:"0.18"})]}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gAdd",x1:"0",y1:"0",x2:"1",y2:"1",children:[e.jsx("stop",{offset:"0",stopColor:"var(--primary)"}),e.jsx("stop",{offset:"1",stopColor:"var(--primary-2)"})]})})]})})]}),e.jsx("section",{className:"quienes-body contact-body",children:e.jsxs("div",{className:"quienes-grid contact-grid",children:[e.jsxs("article",{className:"contact-card",children:[e.jsx("h2",{children:"Formulario de vehículo"}),e.jsxs("form",{className:"contact-form",onSubmit:w,"aria-label":"Formulario agregar vehículo",children:[e.jsxs("label",{children:["Marca",e.jsxs("div",{className:"select-wrap",children:[e.jsxs("select",{name:"marca",value:r.marca,onChange:a=>{const s=a.target.value;c(i=>({...i,marca:s,modelo:""})),s==="other"?(p(!0),c(i=>({...i,marca:""}))):p(!1)},required:!0,children:[e.jsx("option",{value:"",children:"-- Seleccione --"}),e.jsx("option",{value:"Kia",children:"Kia"}),e.jsx("option",{value:"Hyundai",children:"Hyundai"}),e.jsx("option",{value:"Subaru",children:"Subaru"}),e.jsx("option",{value:"Chevrolet",children:"Chevrolet"}),e.jsx("option",{value:"Toyota",children:"Toyota"})]}),e.jsx("span",{className:"select-arrow","aria-hidden":"true"})]})]}),b&&e.jsxs("label",{children:["Especifique marca",e.jsx("input",{name:"marca",value:r.marca,onChange:g,required:!0})]}),e.jsxs("label",{children:["Modelo",e.jsxs("div",{className:"select-wrap",children:[e.jsxs("select",{name:"modelo",value:r.modelo,onChange:a=>{const s=a.target.value,i=r.modelo;s&&j[s]?r.desc===""||N===i?(c(o=>({...o,modelo:s,desc:j[s]})),l(s)):(c(o=>({...o,modelo:s})),l("")):(c(o=>({...o,modelo:s})),l(""))},required:!0,disabled:!d[r.marca],children:[e.jsx("option",{value:"",children:"-- Seleccione --"}),d[r.marca]&&d[r.marca].slice(0,2).map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("span",{className:"select-arrow","aria-hidden":"true"})]})]}),e.jsxs("label",{children:["Año",e.jsxs("div",{className:"select-wrap",children:[e.jsxs("select",{name:"year",value:r.year,onChange:g,required:!0,children:[e.jsx("option",{value:"",children:"-- Seleccione --"}),Array.from({length:v-2020+1},(a,s)=>v-s).map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("span",{className:"select-arrow","aria-hidden":"true"})]})]}),e.jsxs("label",{children:["Precio",e.jsx("div",{className:"price-wrap",children:e.jsx("input",{name:"price",value:r.price,onChange:C,className:n?"input-error":"",placeholder:"e.g. 1200000"})}),n&&e.jsx("div",{className:"field-error",role:"alert",children:n})]}),e.jsxs("label",{children:["Descripción",e.jsx("textarea",{name:"desc",value:r.desc,onChange:a=>{l(""),c(s=>({...s,desc:a.target.value}))},rows:4})]}),e.jsxs("div",{style:{marginTop:".6rem"},children:[e.jsx("button",{className:"btn cta",type:"submit",children:"Agregar"}),e.jsx("button",{className:"btn ghost",type:"button",style:{marginLeft:".6rem"},onClick:()=>h(-1),children:"Cancelar"})]})]})]}),e.jsxs("aside",{className:"quienes-values","aria-hidden":"true",children:[e.jsx("h3",{children:"Consejo"}),e.jsxs("div",{className:"values-grid",children:[e.jsxs("div",{className:"value-card",children:[e.jsx("strong",{children:"Revisa los datos"}),e.jsx("p",{children:"Verifica marca, modelo y año antes de agregar."})]}),e.jsxs("div",{className:"value-card",children:[e.jsx("strong",{children:"Imágenes"}),e.jsx("p",{children:"Puedes subir imágenes más adelante desde la edición del inventario."})]})]})]})]})})]})}export{M as default};
